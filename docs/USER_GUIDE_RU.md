# Руководство пользователя Telegram-бота TRNS

## Введение

TRNS — это Telegram-бот для транскрипции видео с YouTube, Twitter/X.com и локальных файлов с автоматическим переводом и обработкой языковой моделью.

## Начало работы

### 1. Запуск бота

Отправьте команду `/start` боту. Вы получите приветственное сообщение с запросом ключа аутентификации.

### 2. Аутентификация

Введите ключ аутентификации, который вам предоставил администратор. После успешной аутентификации вы сможете использовать все функции бота.

## Основные функции

### Транскрипция YouTube видео

1. Отправьте ссылку на YouTube видео боту
2. Бот начнет обработку видео
3. Вы будете получать обновления транскрипции в реальном времени
4. По завершении вы получите полную транскрипцию и отчет от языковой модели

**Пример:**
```
https://www.youtube.com/watch?v=VIDEO_ID
```

### Транскрипция видео из Twitter/X.com

1. Отправьте ссылку на твит с видео
2. Бот обработает видео так же, как и YouTube видео

**Пример:**
```
https://twitter.com/user/status/1234567890
https://x.com/user/status/1234567890
```

### Транскрипция локальных видеофайлов

1. Отправьте видеофайл боту (поддерживаются форматы: MP4, AVI, MOV, MKV и другие)
2. Бот автоматически обработает файл
3. Вы получите транскрипцию и отчет

**Ограничения:**
- Максимальный размер файла: зависит от настроек Telegram (обычно до 2GB)
- Рекомендуется использовать файлы до 500MB для быстрой обработки

## Команды бота

### `/start`

Запускает бота и запрашивает аутентификацию.

### `/cancel`

Отменяет текущую операцию обработки видео и сбрасывает контекст.

### `/stats`

Показывает оставшуюся дневную емкость для обработки (количество доступных запросов к языковой модели).

**Пример ответа:**
```
Осталось запросов: 750/1000
```

## Кнопки

### "Контекст"

Позволяет установить контекст для обработки. Контекст используется языковой моделью для более точной обработки транскрипции.

**Как использовать:**
1. Нажмите кнопку "Контекст"
2. Введите текст контекста
3. Контекст будет использоваться для всех последующих обработок

**Пример контекста:**
```
Это лекция по машинному обучению. Фокус на нейронных сетях.
```

### "Отмена"

Отменяет текущую операцию обработки.

## Процесс обработки

### Этапы обработки

1. **Начало обработки**: Бот отправляет сообщение "Процессинг запущен"
2. **Извлечение аудио**: Видео загружается и извлекается аудиодорожка
3. **Транскрипция**: 
   - Сначала бот пытается использовать автоматически сгенерированные субтитры (если доступны)
   - Если субтитров нет, используется Whisper для преобразования речи в текст
4. **Перевод**: Если язык не русский, текст автоматически переводится
5. **Обработка языковой моделью**: Транскрипция обрабатывается через языковую модель для создания отчета
6. **Завершение**: Вы получаете полную транскрипцию и отчет

### Обновления в реальном времени

Во время обработки вы будете получать обновления транскрипции по мере их готовности. Это позволяет видеть прогресс обработки.

## Ограничения и особенности

### Дневная емкость

- Бот имеет ограничение в 1000 запросов к языковой модели в день
- Емкость сбрасывается каждый день в полночь UTC
- Предупреждение отправляется, когда остается менее 50 запросов
- Используйте команду `/stats` для проверки оставшейся емкости

### Время обработки

Время обработки зависит от:
- Длины видео
- Доступности субтитров (с субтитрами быстрее)
- Размера модели Whisper (если субтитры недоступны)
- Загрузки сервера

**Примерные времена:**
- Видео 10 минут с субтитрами: ~30 секунд
- Видео 10 минут без субтитров: ~5-10 минут
- Видео 1 час: ~30-60 минут

### Поддерживаемые форматы

**Видео:**
- YouTube (любые публичные видео)
- Twitter/X.com (видео в твитах)
- Локальные файлы: MP4, AVI, MOV, MKV, WEBM и другие форматы, поддерживаемые FFmpeg

**Языки:**
- Автоматическое определение языка
- Поддержка всех языков, поддерживаемых Whisper
- Автоматический перевод на русский (если исходный язык не русский)

## Решение проблем

### Бот не отвечает

1. Проверьте, что вы прошли аутентификацию (отправьте `/start`)
2. Убедитесь, что ваш пользовательский ID добавлен в список разрешенных
3. Попробуйте отправить команду `/cancel` и начать заново

### Ошибка аутентификации

- Убедитесь, что вы вводите правильный ключ аутентификации
- Ключ чувствителен к регистру
- Если проблема сохраняется, обратитесь к администратору

### Ошибка обработки видео

**"Неверная ссылка YouTube"**
- Убедитесь, что ссылка корректна
- Проверьте, что видео доступно публично

**"Не удалось получить видео файл"**
- Проверьте размер файла (может быть слишком большим)
- Убедитесь, что файл не поврежден
- Попробуйте другой формат файла

**"Произошла ошибка"**
- Это может быть временная проблема с сервером
- Попробуйте повторить запрос через несколько минут
- Если проблема сохраняется, обратитесь к администратору

### Превышена дневная емкость

Если вы получили сообщение о превышении дневной емкости:
- Подождите до следующего дня (сброс в полночь UTC)
- Используйте команду `/stats` для проверки статуса
- Обратитесь к администратору для увеличения лимита

### Долгая обработка

Если обработка занимает слишком много времени:
- Это нормально для длинных видео без субтитров
- Проверьте, что бот все еще обрабатывает (вы должны получать обновления)
- Если обновлений нет более 10 минут, попробуйте отменить операцию (`/cancel`) и начать заново

## Советы по использованию

### Для лучшей точности

1. **Используйте контекст**: Установите контекст перед обработкой для более точных результатов
2. **Выбирайте видео с субтитрами**: Видео с автоматически сгенерированными субтитрами обрабатываются быстрее и точнее
3. **Избегайте фонового шума**: Видео с четкой речью дают лучшие результаты

### Для экономии емкости

1. **Используйте субтитры**: Видео с субтитрами не требуют обработки через языковую модель (если субтитры на русском)
2. **Обрабатывайте короткие видео**: Короткие видео быстрее и требуют меньше ресурсов
3. **Проверяйте статистику**: Используйте `/stats` для отслеживания использования

### Для быстрой обработки

1. **Используйте YouTube видео с субтитрами**: Это самый быстрый способ
2. **Избегайте очень длинных видео**: Видео более 2 часов могут обрабатываться очень долго
3. **Используйте локальные файлы для коротких видео**: Локальные файлы могут обрабатываться быстрее, чем загрузка из интернета

## Примеры использования

### Пример 1: Транскрипция лекции

```
1. Отправьте ссылку на лекцию
2. Нажмите "Контекст" и введите: "Это лекция по программированию на Python"
3. Отправьте ссылку на видео
4. Получите транскрипцию и отчет
```

### Пример 2: Транскрипция интервью

```
1. Отправьте видеофайл с интервью
2. Дождитесь обработки
3. Получите полную транскрипцию
```

### Пример 3: Мониторинг емкости

```
1. Отправьте /stats
2. Проверьте оставшуюся емкость
3. Если мало, планируйте использование соответственно
```

## Поддержка

Если у вас возникли проблемы или вопросы:

1. Проверьте это руководство
2. Попробуйте команду `/cancel` и начните заново
3. Обратитесь к администратору бота

## Часто задаваемые вопросы

**Q: Можно ли обрабатывать несколько видео одновременно?**
A: Нет, бот обрабатывает одно видео на пользователя. Дождитесь завершения текущей обработки.

**Q: Что делать, если обработка зависла?**
A: Используйте команду `/cancel` для отмены и попробуйте снова.

**Q: Сохраняется ли история транскрипций?**
A: Нет, транскрипции не сохраняются. Сохраняйте их вручную, если нужно.

**Q: Можно ли изменить язык перевода?**
A: В настоящее время поддерживается только перевод на русский. Для других языков обратитесь к администратору.

**Q: Как долго хранятся результаты?**
A: Результаты отправляются только в Telegram и не хранятся на сервере.

**Q: Можно ли обрабатывать аудиофайлы?**
A: Да, отправьте аудиофайл боту, и он будет обработан так же, как видео.

